---
interface SkillItem {
  id: number;
  name: string | null;
}

interface Props {
  userSkills: SkillItem[];
}

const { userSkills } = Astro.props as Props;
import Button from "@/components/Button.astro";
---
<section class="space-y-4">
  <h2 class="text-xl font-semibold">Skills</h2>
  <form method="post" class="flex gap-3 items-end">
    <input type="hidden" name="_action" value="add_skill" />
    <div class="flex-1">
      <label for="skill_name" class="text-sm">Skill name</label>
      <input id="skill_name" name="name" placeholder="e.g. React" class="w-full rounded border px-3 py-2" />
    </div>
    <Button type="submit" variant="primary">Add skill</Button>
  </form>
  <ul class="flex flex-wrap gap-2">
    {userSkills.map((s) => (
      <li class="px-3 py-1 rounded border flex items-center gap-2">
        <span>{s.name}</span>
        <form method="post">
          <input type="hidden" name="_action" value="delete_skill" />
          <input type="hidden" name="id" value={String(s.id)} />
          <button class="text-red-600" aria-label={`Delete skill ${s.name}`}>Ã—</button>
        </form>
      </li>
    ))}
  </ul>
</section>
